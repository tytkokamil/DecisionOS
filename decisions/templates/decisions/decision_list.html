{% extends 'base.html' %}

{% block page_title %}Decisions Overview{% endblock %}

{% block content %}
<!-- Stats Cards -->
<div class="row mb-4">
    <div class="col-md-3">
        <div class="stat-card">
            <div class="d-flex justify-content-between align-items-center">
                <div>
                    <p class="text-muted mb-1">Total Decisions</p>
                    <h3 class="mb-0">{{ decisions.count }}</h3>
                </div>
                <div class="icon" style="background: #dbeafe; color: #3b82f6;">
                    <i class="bi bi-clipboard-data"></i>
                </div>
            </div>
        </div>
    </div>
    <div class="col-md-3">
        <div class="stat-card">
            <div class="d-flex justify-content-between align-items-center">
                <div>
                    <p class="text-muted mb-1">In Review</p>
                    <h3 class="mb-0">0</h3>
                </div>
                <div class="icon" style="background: #fef3c7; color: #f59e0b;">
                    <i class="bi bi-clock-history"></i>
                </div>
            </div>
        </div>
    </div>
    <div class="col-md-3">
        <div class="stat-card">
            <div class="d-flex justify-content-between align-items-center">
                <div>
                    <p class="text-muted mb-1">Approved</p>
                    <h3 class="mb-0">0</h3>
                </div>
                <div class="icon" style="background: #d1fae5; color: #10b981;">
                    <i class="bi bi-check-circle"></i>
                </div>
            </div>
        </div>
    </div>
    <div class="col-md-3">
        <div class="stat-card">
            <div class="d-flex justify-content-between align-items-center">
                <div>
                    <p class="text-muted mb-1">Critical Priority</p>
                    <h3 class="mb-0">0</h3>
                </div>
                <div class="icon" style="background: #fee2e2; color: #ef4444;">
                    <i class="bi bi-exclamation-triangle"></i>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Decisions List -->
<div class="card">
    <div class="card-header bg-white d-flex justify-content-between align-items-center py-3">
        <h5 class="mb-0"><i class="bi bi-list-ul"></i> Recent Decisions</h5>
        <a href="/admin/decisions/decision/add/" class="btn btn-primary">
            <i class="bi bi-plus-circle"></i> New Decision
        </a>
    </div>
    <div class="card-body p-0">
        {% if decisions %}
        <div class="table-responsive">
            <table class="table table-hover mb-0">
                <thead class="bg-light">
                    <tr>
                        <th class="px-4 py-3">Title</th>
                        <th>Team</th>
                        <th>Status</th>
                        <th>Priority</th>
                        <th>Created</th>
                        <th class="text-end px-4">Actions</th>
                    </tr>
                </thead>
                <tbody>
                    {% for decision in decisions %}
                    <tr>
                        <td class="px-4">
                            <strong>{{ decision.title }}</strong>
                            <br><small class="text-muted">{{ decision.description|truncatewords:10 }}</small>
                        </td>
                        <td>{{ decision.team.name }}</td>
                        <td>
                            {% if decision.status == 'draft' %}
                            <span class="badge bg-info">Draft</span>
                            {% elif decision.status == 'review' %}
                            <span class="badge bg-warning">In Review</span>
                            {% elif decision.status == 'approved' %}
                            <span class="badge bg-success">Approved</span>
                            {% else %}
                            <span class="badge bg-secondary">{{ decision.get_status_display }}</span>
                            {% endif %}
                        </td>
                        <td>
                            {% if decision.priority == 'critical' %}
                            <span class="badge bg-danger">Critical</span>
                            {% elif decision.priority == 'high' %}
                            <span class="badge bg-warning">High</span>
                            {% elif decision.priority == 'medium' %}
                            <span class="badge bg-primary">Medium</span>
                            {% else %}
                            <span class="badge bg-secondary">Low</span>
                            {% endif %}
                        </td>
                        <td><small class="text-muted">{{ decision.created_at|date:"M d, Y" }}</small></td>
                        <td class="text-end px-4">
                            <a href="/admin/decisions/decision/{{ decision.id }}/change/" class="btn btn-sm btn-outline-primary">
                                <i class="bi bi-pencil"></i> Edit
                            </a>
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
        {% else %}
        <div class="text-center py-5">
            <i class="bi bi-inbox" style="font-size: 4rem; color: #cbd5e1;"></i>
            <p class="text-muted mt-3">No decisions yet</p>
            <a href="/admin/decisions/decision/add/" class="btn btn-primary">Create First Decision</a>
        </div>
        {% endif %}
    </div>
</div>
{% endblock %}